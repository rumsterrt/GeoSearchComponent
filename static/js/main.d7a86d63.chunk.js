(this["webpackJsonpgeo-search-component"]=this["webpackJsonpgeo-search-component"]||[]).push([[0],{155:function(e,t,n){e.exports=n(234)},234:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),i=r.a.createContext({}),l=i.Provider,u=(i.Consumer,i),s=n(32),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{form:{country:"",city:"",postal_code:"",street_address:"",street_number:"",room_type:"",room:"",isLoading:!1},pickedOption:{}},t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case"SET_ADDRESS_REQUEST":return Object(s.a)({},e,{form:Object(s.a)({},e.form,{isLoading:!0})});case"SET_ADDRESS_SUCCESS":return Object(s.a)({},e,{form:Object(s.a)({},e.form,{},n.data,{isLoading:!1}),pickedOption:n.pickedOption});case"SET_ADDRESS_FAILURE":return Object(s.a)({},e,{form:Object(s.a)({},e.form,{isLoading:!0}),pickedOption:{}});case"RESET_DATA":return{form:{country:"",city:"",postal_code:"",street_address:"",street_number:"",room_type:"",room:"",isLoading:!1},pickedOption:{}};default:return e}},m=n(13),p=n(83),b=n.n(p),E=n(2),f=n(56),y=n(280),v=n(268),h=n(38);function g(){var e=Object(f.a)(["\n    ","\n"]);return g=function(){return e},e}function _(){var e=Object(f.a)(["\n    list-style: none;\n    margin: 0;\n    padding: 8px 0px;\n    position: relative;\n"]);return _=function(){return e},e}function S(){var e=Object(f.a)(["\n    ","\n"]);return S=function(){return e},e}function x(){var e=Object(f.a)(["\n    position: relative;\n"]);return x=function(){return e},e}var O=h.b.div(x()),k=h.b.div(S(),(function(e){var t=e.theme;return"\n        z-index: 1;\n        position: absolute;\n        box-sizing: border-box;\n        top: 100%;\n        right: 0;\n        left: 0;\n        background-color: ".concat(t.palette.background.paper,";\n        max-height: 300px;\n        overflow-y: auto;\n        box-shadow: rgba(0, 0, 0, 0.2) 0px 2px 1px -1px, rgba(0, 0, 0, 0.14) 0px 1px 1px 0px, rgba(0, 0, 0, 0.12) 0px 1px 3px 0px;\n    ")})),j=h.b.ul(_()),R=h.b.li(g(),(function(e){var t=e.theme;return"\n        word-break: break-all;\n        min-height: 48px;\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n        cursor: pointer;\n        padding-top: 6px;\n        box-sizing: border-box;\n        outline: 0;\n        padding-bottom: 6px;\n        padding-left: 16px;\n        padding-right: 16px;\n        &:hover {\n            background-color: ".concat(t.palette.action.hover,";\n        },\n        &:active {\n            background-color: ").concat(t.palette.action.selected,",\n        },\n    ")})),w=function(e){var t=e.initOptions,n=void 0===t?null:t,a=e.initPicked,o=void 0===a?{}:a,c=e.loadOptions,i=e.onClickOption,l=Object(E.a)(e,["initOptions","initPicked","loadOptions","onClickOption"]),u=r.a.useState(""),s=Object(m.a)(u,2),d=s[0],p=s[1],b=r.a.useState(n),f=Object(m.a)(b,2),h=f[0],g=f[1],_=r.a.useState(null),S=Object(m.a)(_,2),x=S[0],w=S[1],C=r.a.useState(null),q=Object(m.a)(C,2),D=q[0],P=q[1],T=r.a.useState(null),A=Object(m.a)(T,2),I=A[0],W=A[1],B=r.a.useState(o),L=Object(m.a)(B,2),U=L[0],N=L[1],z=r.a.useState(!1),F=Object(m.a)(z,2),Q=F[0],Y=F[1],G=Boolean(x)&&h&&D||Q;return r.a.createElement(v.a,{onClickAway:function(){P(!1)}},r.a.createElement(O,null,r.a.createElement(y.a,Object.assign({onFocus:function(){return P(!0)},label:"Search",type:"search",value:U.address||d,onChange:function(e){N({});var t=e.target.value;if(p(t),I&&clearTimeout(I),!(t.length<=2)){var n=setTimeout((function(){Y(!0),c(t).then((function(e){g(e)})).catch((function(e){g(null)})).finally((function(){W(null),Y(!1)}))}),1e3);W(n)}},ref:w},l)),G&&r.a.createElement(k,{role:"presentation",style:{width:x?x.clientWidth:null},placement:"bottom",open:!0,anchorEl:x},r.a.createElement(j,null,Q&&r.a.createElement(R,null,"Loading..."),h&&0===h.length&&!Q&&r.a.createElement(R,null,"Empty"),h&&h.map((function(e,t){return r.a.createElement(R,{key:t,onClick:function(){N(e),P(!1),i(e)}},e.address)}))))))},C=n(239);function q(){var e=Object(f.a)(["\n    ","\n"]);return q=function(){return e},e}var D=Object(h.b)(C.a)(q(),(function(e){var t=e.theme;return"\n        margin-top: ".concat(t.spacing(2),"px;\n        margin-bottom: ").concat(t.spacing(3),"px;\n        padding: ").concat(t.spacing(2),"px;\n    ")})),P=function(e){var t=e.children;return r.a.createElement(D,null,t)},T=n(6),A=n(137),I=n.n(A),W=new window.google.maps.places.PlacesService(document.createElement("div")),B=function(){var e=["country","locality","postal_code","street_address","route","street_number","room"],t={country:"country",locality:"city",postal_code:"postal_code",route:"street_address",street_address:"street_address",street_number:"street_number",room:"room"};return function(n){return n.reduce((function(n,a){var r=I()(a.types,e)[0];return r?Object(s.a)({},n,Object(T.a)({},t[r],a.long_name)):n}),{})}}(),L=n(274),U=n(89),N=function(){var e=r.a.useContext(u),t=Object(m.a)(e,2),n=t[0],a=t[1],o=Object(U.useSnackbar)().enqueueSnackbar,c=b()(n,"pickedOption",{});return r.a.createElement(P,null,r.a.createElement(w,{fullWidth:!0,initPicked:c,loadOptions:function(e){return function(e){return new Promise((function(t,n){W.textSearch({query:e},(function(e,a){a===window.google.maps.places.PlacesServiceStatus.OVER_QUERY_LIMIT&&n(),t(e.map((function(e){return{address:e.formatted_address,id:e.place_id}})))}))}))}(e).catch((function(e){return o("Google Place API limits ",{variant:"error"}),[]}))},onClickOption:function(e){var t;a({type:"SET_ADDRESS_REQUEST"}),(t=e.id,new Promise((function(e,n){W.getDetails({placeId:t,fields:["address_component"]},(function(t,a){a===window.google.maps.places.PlacesServiceStatus.OVER_QUERY_LIMIT&&n(),e(B(b()(t,"address_components",[])))}))}))).then((function(t){a({type:"SET_ADDRESS_SUCCESS",payload:{data:t,pickedOption:e}})})).catch((function(e){o("Google Place API limits ",{variant:"error"}),a({type:"SET_ADDRESS_FAILURE"})}))},label:"Search address"}),c.address&&r.a.createElement(L.a,null,"You choose: ".concat(c.address)))},z=n(76),F=n(42),Q=n(101),Y=n.n(Q),G=n(281),V=function(e){var t=e.style,n=e.name,a=e.render,o=e.className;return r.a.createElement(z.a,{name:n,render:function(e){var c=e.field,i=e.form,l=Y.a.get(i.touched,n)&&Y.a.get(i.errors,n);return r.a.createElement(G.a,{style:t,className:o},a({field:Object(s.a)({},c,{error:l}),form:i}),l&&r.a.createElement(L.a,{color:"error",variant:"caption"},Y.a.get(i.errors,n)))}})},J=function(e){var t=e.style,n=e.name,a=e.hint,o=(e.error,Object(E.a)(e,["style","name","hint","error"]));return r.a.createElement(V,{style:t,hint:a,name:n,render:function(e){var t=e.field;return r.a.createElement(y.a,Object.assign({},t,o,{error:!t||!!t.error}))}})},M=n(275),$=n(282),H=function(){return F.a().shape({country:F.b().required("Required"),city:F.b().required("Required"),postal_code:F.b().required("Required"),street_address:F.b().required("Required"),street_number:F.b().required("Required"),room_type:F.b().required("Required"),room:F.b().required("Required")})},K=function(e){var t=e.address,n=void 0===t?{}:t,a=e.onSubmit,o={initialValues:{country:n.country||"",city:n.city||"",postal_code:n.postal_code||"",street_address:n.street_address||"",street_number:n.street_number||"",room_type:n.room_type||"",room:n.room||""},onSubmit:a,validationSchema:H,enableReinitialize:!0};return r.a.createElement(z.c,o,r.a.createElement(z.b,null,r.a.createElement(M.a,{container:!0,spacing:3},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(J,{id:"country",name:"country",label:"Country",type:"text",fullWidth:!0,required:!0})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(J,{id:"city",name:"city",label:"City",type:"text",fullWidth:!0,required:!0})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(J,{id:"postal_code",name:"postal_code",label:"Postal Code",type:"number",fullWidth:!0,required:!0})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(J,{id:"street_address",name:"street_address",label:"Street Name",type:"text",fullWidth:!0,required:!0})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(J,{id:"street_number",name:"street_number",label:"Street Number",type:"number",fullWidth:!0,required:!0})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(J,{id:"room_type",name:"room_type",label:"Room Type",type:"text",fullWidth:!0,required:!0})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(J,{id:"room",name:"room",label:"Room Number",type:"number",fullWidth:!0,required:!0})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement($.a,{type:"submit",variant:"contained",color:"primary"},"Sumbit")))))},X=function(e){var t=e.onSubmit,n=void 0===t?function(){}:t,a=r.a.useContext(u),o=Object(m.a)(a,2),c=o[0],i=o[1];return r.a.createElement(P,null,r.a.createElement(K,{address:c.form||{},onSubmit:function(e){i({type:"SET_ADDRESS_SUCCESS",payload:{data:e}}),n()}}))},Z=function(){var e=r.a.useContext(u),t=Object(m.a)(e,1)[0].form;return r.a.createElement(P,null,r.a.createElement(G.a,{width:"100%",display:"flex",alignItems:"center",flexDirection:"column"},r.a.createElement(L.a,{variant:"h6"},"Country:"),r.a.createElement(L.a,{gutterBottom:!0,variant:"body1"},t.country),r.a.createElement(L.a,{variant:"h6"},"City:"),r.a.createElement(L.a,{gutterBottom:!0,variant:"body1"},t.city),r.a.createElement(L.a,{variant:"h6"},"Postal code:"),r.a.createElement(L.a,{gutterBottom:!0,variant:"body1"},t.postal_code),r.a.createElement(L.a,{variant:"h6"},"Street address:"),r.a.createElement(L.a,{gutterBottom:!0,variant:"body1"},t.street_address),r.a.createElement(L.a,{variant:"h6"},"Street number:"),r.a.createElement(L.a,{gutterBottom:!0,variant:"body1"},t.street_number),r.a.createElement(L.a,{variant:"h6"},"Room type:"),r.a.createElement(L.a,{gutterBottom:!0,variant:"body1"},t.room_type),r.a.createElement(L.a,{variant:"h6"},"Room:"),r.a.createElement(L.a,{gutterBottom:!0,variant:"body1"},t.room)))},ee=n(285),te=n(277),ne=n(284),ae=n(278),re=n(276);function oe(){var e=Object(re.a)("(max-width: 600px)"),t=r.a.useState(0),n=Object(m.a)(t,2),a=n[0],o=n[1],c=["Search address","Edit address structure","You object!"],i=function(e){switch(e){case 0:return{render:function(e){return r.a.createElement(N,e)},next:!0};case 1:return{render:function(e){return r.a.createElement(X,e)},back:!0};case 2:return{render:function(e){return r.a.createElement(Z,e)},back:!0,reset:!0};default:return{render:r.a.createElement("div",null,"Nothing")}}}(a),l=function(){o((function(e){return e+1}))},u=r.a.createElement(r.a.Fragment,null,i.render({onSubmit:l}),r.a.createElement(G.a,{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},i.reset&&r.a.createElement($.a,{onClick:function(){o(0)}},"Reset"),i.back&&r.a.createElement($.a,{disabled:0===a,onClick:function(){o((function(e){return e-1}))}},"Back"),i.next&&r.a.createElement($.a,{variant:"contained",color:"primary",onClick:l},"Next")));return r.a.createElement(G.a,{width:"100%"},r.a.createElement(ee.a,{activeStep:a,orientation:e?"vertical":"horizontal"},c.map((function(t,n){return r.a.createElement(te.a,{key:t},r.a.createElement(ne.a,null,t),e&&a===n&&r.a.createElement(ae.a,null,u))}))),!e&&u)}var ce=n(80),ie=n(273),le=n(279),ue=Object(ce.a)();var se=function(){var e=Object(re.a)("(min-width:600px)"),t=r.a.useReducer(d,{form:{country:"",city:"",postal_code:"",street_address:"",street_number:"",room_type:"",room:"",isLoading:!1},pickedOption:{}});return r.a.createElement(l,{value:t},r.a.createElement(ie.a,{theme:ue},r.a.createElement(h.a,{theme:ue},r.a.createElement(U.SnackbarProvider,{maxSnack:3},r.a.createElement(le.a,{maxWidth:!!e&&"md",disableGutters:!e},r.a.createElement(oe,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[155,1,2]]]);
//# sourceMappingURL=main.d7a86d63.chunk.js.map